<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube SEO Tag Generator</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

    <script>
        tailwind.config = {
            darkMode: 'class'
        }
    </script>

    <style>
        .main-title {
            background: linear-gradient(90deg, #7F1D1D, #000000);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .gradient-header {
            background: linear-gradient(
                135deg,
                rgba(127, 29, 29, 0.08),
                rgba(0, 0, 0, 0.05)
            );
            border: 1px dashed #D6C3B3;
        }

        /* ðŸ”¥ Glass container */
        .glass-container {
            background: rgba(255, 247, 237, 0.75);
            backdrop-filter: blur(14px);
            -webkit-backdrop-filter: blur(14px);
            border: 3px solid #7F1D1D;
            border-radius: 28px;
            box-shadow: 0 25px 60px rgba(127, 29, 29, 0.15);
        }

        .inner-card {
            background: rgba(255, 253, 248, 0.95);
            border: 1px solid #E7D8C9;
            border-radius: 20px;
        }

        .tag {
            background: rgba(127, 29, 29, 0.12);
            border: 1px solid #E7D8C9;
            color: #000000;
            transition: transform .1s ease, background .2s ease;
        }

        .tag:hover {
            transform: translateY(-1px);
            background: rgba(127, 29, 29, 0.18);
        }

        .error {
            background: rgba(127, 29, 29, 0.12);
            color: #7F1D1D;
            border-left: 4px solid #7F1D1D;
        }

        .success {
            background: rgba(16, 185, 129, 0.14);
            color: #000000;
            border-left: 4px solid #065F46;
        }

        .dark .glass-container {
            background: rgba(30, 27, 22, 0.75);
            border-color: #DC2626;
        }

        .dark .inner-card,
        .dark .tag {
            background: rgba(30, 27, 22, 0.9);
            border-color: #3A3028;
            color: #E7E5E4;
        }

        .dark .gradient-header {
            border-color: #3A3028;
        }
    </style>
</head>

<body class="bg-[#FFF7ED] text-black min-h-screen transition-colors duration-300
             dark:bg-[#1E1B16] dark:text-[#E7E5E4]">

<!-- Navbar -->
<div th:replace="~{fragments/navbar :: navbar}" th:with="activePage='seo'"></div>

<div class="container mx-auto px-4 max-w-3xl mt-14 pb-14">

    <!-- OUTER GLASS CONTAINER -->
    <div class="glass-container p-6 md:p-8">

        <!-- Header -->
        <div class="text-center mb-10">
            <h1 class="main-title text-4xl md:text-5xl font-extrabold mb-4">
                YouTube SEO Tag Generator
            </h1>

            <div class="gradient-header rounded-xl p-4 mt-6">
                <p class="text-black dark:text-[#A8A29E] text-lg">
                    Enter a YouTube video title to extract SEO tags from similar videos and optimize your content.
                </p>
            </div>
        </div>

        <!-- Form -->
        <div class="inner-card shadow-lg p-6 mb-8">

            <form action="/youtube/search" method="post">

                <div class="mb-6">
                    <label for="videoTitle"
                           class="block text-sm font-medium mb-2">
                        YouTube Video Title
                    </label>

                    <input type="text" id="videoTitle" name="videoTitle" required
                           placeholder="Enter the title of your YouTube video"
                           class="w-full px-4 py-3 rounded-lg
                                  bg-[#FFF7ED] dark:bg-[#2A211B]
                                  border border-[#D6C3B3] dark:border-[#3A3028]
                                  focus:border-[#7F1D1D]
                                  focus:ring-2 focus:ring-[#7F1D1D]/30
                                  transition-colors duration-200">
                </div>

                <button type="submit"
                        class="w-full bg-[#FFF7ED] hover:bg-[#7F1D1D]
                               text-black hover:text-white
                               border border-[#7F1D1D]
                               font-medium py-3 px-6
                               rounded-lg shadow-lg
                               transition-colors duration-200
                               flex items-center justify-center gap-2">
                    <span class="text-xl">+</span>
                    Generate SEO Tags
                </button>
            </form>
        </div>

        <!-- Error -->
        <div th:if="${error}" class="error rounded-lg p-4 mb-6" th:text="${error}"></div>

        <!-- Primary Video -->
        <div th:if="${primaryVideo != null}" class="inner-card shadow-lg p-6 mb-8">

            <div class="flex justify-between items-center mb-4">
                <div class="flex items-center gap-2 font-bold">
                    <i class="bi bi-star-fill text-[#7F1D1D]"></i>
                    <span>Primary Video Tags</span>
                </div>

                <button type="button"
                        class="bg-[#FFF7ED] hover:bg-[#7F1D1D]
                               text-black hover:text-white
                               border border-[#7F1D1D]
                               text-sm font-medium
                               py-2 px-4 rounded-lg transition-colors duration-200
                               flex items-center gap-2"
                        th:onclick="'copyTags(\\'' + ${primaryVideo.tagsAsString} + '\\')'">
                    <i class="bi bi-clipboard-check"></i>
                    Copy Tags
                </button>
            </div>

            <div class="mb-1" th:text="${primaryVideo.title}"></div>
            <div class="mb-4" th:text="${primaryVideo.channelTitle}"></div>

            <div>
                <span th:each="tag : ${primaryVideo.tags}"
                      class="tag inline-flex items-center gap-2 rounded-full px-3 py-2 mr-2 mb-2 text-sm">
                    <i class="bi bi-hash"></i>
                    <span th:text="${tag}"></span>
                </span>
            </div>
        </div>

        <!-- Related Videos -->
        <div th:if="${relatedVideos != null}" class="inner-card shadow-lg p-6">

            <div class="flex justify-between items-center mb-4">
                <div class="flex items-center gap-2 font-bold">
                    <i class="bi bi-collection text-[#7F1D1D]"></i>
                    <span>Related Videos Tags</span>
                </div>

                <button type="button"
                        class="bg-[#FFF7ED] hover:bg-[#7F1D1D]
                               text-black hover:text-white
                               border border-[#7F1D1D]
                               text-sm font-medium
                               py-2 px-4 rounded-lg transition-colors duration-200
                               flex items-center gap-2"
                        th:onclick="'copyTags(\\'' + ${allTagsAsString} + '\\')'">
                    <i class="bi bi-clipboard"></i>
                    Copy All
                </button>
            </div>

            <div th:each="video : ${relatedVideos}" class="mb-6">
                <div class="font-semibold mb-2">
                    <i class="bi bi-play-btn text-[#7F1D1D] mr-2"></i>
                    <span th:text="${video.title}"></span>
                </div>

                <div>
                    <span th:if="${#lists.isEmpty(video.tags)}" class="italic">
                        No tags found
                    </span>

                    <span th:each="tag : ${video.tags}"
                          class="tag inline-flex items-center gap-2 rounded-full px-3 py-2 mr-2 mb-2 text-sm">
                        <i class="bi bi-tag"></i>
                        <span th:text="${tag}"></span>
                    </span>
                </div>
            </div>
        </div>

        <!-- Copy Success -->
        <div id="copySuccess" class="success hidden rounded-lg p-4 mt-6">
            Tags copied to clipboard!
        </div>

    </div>
</div>

<script>
    function copyTags(tags) {
        navigator.clipboard.writeText(tags).then(() => {
            const el = document.getElementById('copySuccess');
            el.classList.remove('hidden');
            setTimeout(() => el.classList.add('hidden'), 2000);
        });
    }
</script>

</body>
</html>
